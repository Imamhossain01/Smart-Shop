<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SmartShop ‚Äì Online Product Store</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">

  <!-- Navbar -->
  <nav class="fixed top-0 w-full bg-white shadow z-50">
    <div class="max-w-7xl mx-auto flex justify-between items-center px-4 py-3">
      <h1 class="text-2xl font-bold text-blue-600">SmartShop</h1>
      <ul class="hidden md:flex space-x-6 font-medium">
        <li><a href="#home" class="nav-link text-gray-700 hover:text-blue-500">Home</a></li>
        <li><a href="#products" class="nav-link text-gray-700 hover:text-blue-500">Products</a></li>
        <li><a href="#reviews" class="nav-link text-gray-700 hover:text-blue-500">Reviews</a></li>
        <li><a href="#contact" class="nav-link text-gray-700 hover:text-blue-500">Contact</a></li>
      </ul>
    </div>
  </nav>

  <!-- Banner -->
    <section id="home" class="pt-20">
    <div class="relative w-full h-full overflow-hidden">
        <div id="banner-slides" class="flex transition-transform duration-500 w-[200%] h-full">
        <img src="banner1.jpg" alt="Banner 1" class="w-1/2 h-full object-cover">
        <img src="banner2.jpg" alt="Banner 2" class="w-1/2 h-full object-cover">
        </div>
        <button onclick="prevSlide()" class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded">‚ùÆ</button>
        <button onclick="nextSlide()" class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded">‚ùØ</button>
    </div>
    </section>

  <!-- Products -->
  <section id="products" class="max-w-7xl mx-auto px-4 py-12">
    <div class="flex flex-col md:flex-row justify-between items-center mb-6">
      <h2 class="text-3xl font-bold mb-4 md:mb-0">Our Products</h2>
      <div class="flex items-center space-x-3">
        <input id="search" type="text" placeholder="Search products..." class="border p-2 rounded w-60">
        <select id="categoryFilter" class="border p-2 rounded">
          <option value="all">All</option>
        </select>
      </div>
    </div>
    <div id="productList" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
  </section>

  <!-- Cart Panel -->
  <div id="cartPanel" class="fixed right-0 top-0 w-80 bg-white shadow-lg h-full p-4 overflow-y-auto transform translate-x-full transition-transform duration-300 z-50">
    <h3 class="text-xl font-semibold mb-3">üõçÔ∏è Your Cart</h3>
    <ul id="cartItems" class="space-y-2 mb-4"></ul>
    <p id="subtotal" class="font-medium">Subtotal: 0 BDT</p>
    <p id="discount" class="font-medium" data-percent="0">Discount: 0%</p>
    <p id="delivery" class="font-medium">Delivery: 100 BDT</p>
    <p id="total" class="font-semibold text-lg mt-2">Total: 0 BDT</p>
    <p id="balance" class="font-semibold text-blue-600 mt-2">Balance: 1000 BDT</p>
    <div class="mt-4 space-y-2">
      <input id="coupon" type="text" placeholder="Enter coupon" class="border p-2 rounded w-full">
      <button onclick="applyCoupon()" class="bg-green-500 text-white px-3 py-1 rounded w-full">Apply Coupon</button>
      <button onclick="addMoney()" class="bg-blue-500 text-white px-3 py-1 rounded w-full">Add 1000 BDT</button>
      <button onclick="checkout()" class="bg-yellow-500 text-white px-3 py-1 rounded w-full">Checkout</button>
      <button onclick="closeCart()" class="bg-gray-400 text-white px-3 py-1 rounded w-full">Close Cart</button>
    </div>
  </div>

  <!-- Reviews -->
  <section id="reviews" class="bg-white py-12">
    <div class="max-w-5xl mx-auto px-4 text-center">
      <h2 class="text-3xl font-bold mb-6">Customer Reviews</h2>
      <div class="relative overflow-hidden">
        <div id="reviewSlides" class="flex transition-transform duration-500"></div>
        <button onclick="prevReview()" class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-gray-700 text-white p-2 rounded">‚ùÆ</button>
        <button onclick="nextReview()" class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-gray-700 text-white p-2 rounded">‚ùØ</button>
      </div>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="max-w-4xl mx-auto px-4 py-12">
    <h2 class="text-3xl font-bold mb-6 text-center">Contact Us</h2>
    <form id="contactForm" class="space-y-4">
      <input id="name" type="text" placeholder="Your Name" class="border p-2 w-full rounded" required>
      <input id="email" type="email" placeholder="Your Email" class="border p-2 w-full rounded" required>
      <textarea id="message" placeholder="Your Message" class="border p-2 w-full rounded" required></textarea>
      <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded">Send</button>
    </form>
    <p id="formMsg" class="text-green-600 mt-4 hidden">Thank you for your message!</p>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-800 text-white py-6 text-center">
    <p>¬© 2025 SmartShop | All rights reserved.</p>
    <button onclick="scrollToTop()" class="mt-3 bg-blue-500 px-3 py-1 rounded">Back to Top</button>
  </footer>

  
<script>
    // Banner Slide
    let slideIndex = 0;
    const slides = document.getElementById("banner-slides");
    const totalSlides = 2; // number of images

    function nextSlide() {
        slideIndex = (slideIndex + 1) % totalSlides;
        updateSlide();
    }
    function prevSlide() {
        slideIndex = (slideIndex - 1 + totalSlides) % totalSlides;
        updateSlide();
    }
    function updateSlide() {
        slides.style.transform = `translateX(-${slideIndex * 50}%)`;
    }
    setInterval(nextSlide, 5000);


    // Fetch Products
    const productList = document.getElementById("productList");
    const categoryFilter = document.getElementById("categoryFilter");
    let products = [];

    async function loadProducts() {
      const res = await fetch("https://fakestoreapi.com/products");
      products = await res.json();
      // Ensure prices >= 500
      products = products.map(p => ({ ...p, price: Math.max(Math.round(p.price), 500) }));
      displayProducts(products);
      populateCategories();
    }

    function populateCategories() {
      const categories = [...new Set(products.map(p => p.category))];
      categories.forEach(cat => {
        const opt = document.createElement("option");
        opt.value = cat;
        opt.textContent = cat;
        categoryFilter.appendChild(opt);
      });
    }

    function displayProducts(items) {
      productList.innerHTML = "";
      items.forEach(p => {
        const div = document.createElement("div");
        div.className = "bg-white p-4 rounded-lg shadow hover:shadow-lg transition flex flex-col items-center";
        div.innerHTML = `
          <div class="w-full aspect-square">
            <img src="${p.image}" alt="${p.title}" class="w-full h-full object-cover rounded mb-2">
          </div>
          <h3 class="font-semibold text-sm line-clamp-2 text-center">${p.title}</h3>
          <p class="text-blue-600 font-bold mt-1">${p.price} BDT</p>
          <p class="text-yellow-500">‚≠ê ${p.rating.rate}</p>
          <button onclick="addToCart(${p.id}, ${p.price})" class="bg-blue-500 text-white px-3 py-1 mt-2 rounded w-full">Add to Cart</button>
        `;
        productList.appendChild(div);
      });
    }

    // Search & Filter
    document.getElementById("search").addEventListener("input", e => {
      const val = e.target.value.toLowerCase();
      displayProducts(products.filter(p => p.title.toLowerCase().includes(val)));
    });
    categoryFilter.addEventListener("change", e => {
      const val = e.target.value;
      displayProducts(val === "all" ? products : products.filter(p => p.category === val));
    });

    // Cart System
    let cart = [];
    let balance = parseInt(localStorage.getItem("balance")) || 1000;
    const cartPanel = document.getElementById("cartPanel");

    function addToCart(id, price) {
      const item = products.find(p => p.id === id);
      const existing = cart.find(c => c.id === id);
      if (existing) existing.qty++;
      else cart.push({ ...item, qty: 1, price });
      updateCart();
      openCart();
    }

    function removeFromCart(id) {
      cart = cart.filter(c => c.id !== id);
      updateCart();
    }

    function updateCart() {
      const cartItems = document.getElementById("cartItems");
      cartItems.innerHTML = "";
      let subtotal = 0;
      cart.forEach(item => {
        subtotal += item.price * item.qty;
        const li = document.createElement("li");
        li.className = "flex justify-between items-center border p-2 rounded";
        li.innerHTML = `
          <div class="flex items-center space-x-2">
            <img src="${item.image}" alt="${item.title}" class="w-12 h-12 object-cover rounded">
            <span>${item.title.substring(0,15)}... x${item.qty}</span>
          </div>
          <button onclick="removeFromCart(${item.id})" class="text-red-600 font-bold">√ó</button>
        `;
        cartItems.appendChild(li);
      });

      let delivery = cart.length > 0 ? 100 : 0;
      let discount = (document.getElementById("discount").dataset.percent || 0) / 100;
      let total = subtotal + delivery - subtotal * discount;

      document.getElementById("subtotal").innerText = `Subtotal: ${subtotal.toFixed(2)} BDT`;
      document.getElementById("delivery").innerText = `Delivery: ${delivery} BDT`;
      document.getElementById("total").innerText = `Total: ${total.toFixed(2)} BDT`;
      document.getElementById("balance").innerText = `Balance: ${balance} BDT`;

      if (total > balance) console.warn("‚ö†Ô∏è Not enough balance!");
    }

    function applyCoupon() {
      const code = document.getElementById("coupon").value.trim();
      if (code === "SMART10") {
        document.getElementById("discount").dataset.percent = 10;
        document.getElementById("discount").innerText = "Discount: 10%";
      } else alert("Invalid Coupon!");
      updateCart();
    }

    function addMoney() {
      balance += 1000;
      localStorage.setItem("balance", balance);
      updateCart();
    }

    function checkout() {
      alert("‚ö†Ô∏è Payment method under maintenance today. Please come back tomorrow.");
    }

    function openCart() { cartPanel.classList.remove("translate-x-full"); }
    function closeCart() { cartPanel.classList.add("translate-x-full"); }

    // Reviews
    const reviewSlides = document.getElementById("reviewSlides");
    let reviewIndex = 0;
    const reviews = [
      { name:"Tazbih", comment:"Great products!", rating:5, date:"2025-01-01", img:"review1.jpg" },
      { name:"Imam", comment:"Fast delivery.", rating:4, date:"2025-01-02", img:"review2.jpg" },
      { name:"Hasib", comment:"Excellent service.", rating:5, date:"2025-01-03", img:"review3.jpg" }
    ];
    reviews.forEach(r => {
      const div = document.createElement("div");
      div.className = "w-full flex-shrink-0 p-4 flex items-center space-x-4";
      div.innerHTML = `
        <img src="${r.img}" alt="${r.name}" class="w-16 h-16 object-cover rounded-full">
        <div class="text-left">
          <p class="italic">"${r.comment}"</p>
          <p class="font-semibold mt-1">${r.name} ‚Äì ‚≠ê${r.rating}</p>
          <p class="text-sm text-gray-500">${r.date}</p>
        </div>
      `;
      reviewSlides.appendChild(div);
    });
    function nextReview() { reviewIndex = (reviewIndex + 1) % reviewSlides.children.length; updateReview(); }
    function prevReview() { reviewIndex = (reviewIndex - 1 + reviewSlides.children.length) % reviewSlides.children.length; updateReview(); }
    function updateReview() { reviewSlides.style.transform = `translateX(-${reviewIndex * 100}%)`; }
    setInterval(nextReview, 4000);

    // Contact Form
    document.getElementById("contactForm").addEventListener("submit", e => {
      e.preventDefault();
      document.getElementById("formMsg").classList.remove("hidden");
      e.target.reset();
    });

    // Scroll to Top
    function scrollToTop() { window.scrollTo({ top:0, behavior:"smooth" }); }

    // Active Nav Highlight
    const navLinks = document.querySelectorAll(".nav-link");
    window.addEventListener("scroll", () => {
      const fromTop = window.scrollY + 100;
      navLinks.forEach(link => {
        const section = document.querySelector(link.getAttribute("href"));
        if (section.offsetTop <= fromTop && section.offsetTop + section.offsetHeight > fromTop) {
          link.classList.add("text-blue-500");
        } else link.classList.remove("text-blue-500");
      });
    });

    loadProducts();
  </script>
</body>
</html>
