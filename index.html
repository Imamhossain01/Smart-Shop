<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SmartShop ‚Äì Online Product Store</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Custom styles for better alignment */
    .line-clamp-2 {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    
    #banner-slides {
      height: 400px;
    }
    
    @media (max-width: 768px) {
      #banner-slides {
        height: 250px;
      }
    }
    
    /* Review slides container fix */
    #reviewSlides {
      width: 100%;
    }
    
    #reviewSlides > div {
      min-width: 100%;
    }
    
    /* Custom review card styling */
    .review-card {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      padding: 2rem;
      background-color: white;
      border-radius: 0.75rem;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      height: 100%;
    }
    
    .review-photo {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 50%;
      margin-bottom: 1rem;
      border: 3px solid #3b82f6;
    }
    
    .review-name {
      font-weight: 600;
      font-size: 1.125rem;
      margin-bottom: 0.5rem;
      color: #1f2937;
    }
    
    .review-rating {
      color: #f59e0b;
      margin-bottom: 1rem;
    }
    
    .review-comment {
      font-style: italic;
      color: #4b5563;
      line-height: 1.6;
      margin-bottom: 0.5rem;
    }
    
    .review-date {
      font-size: 0.875rem;
      color: #9ca3af;
    }
    
    /* Product card styling for uniform size */
    .product-card {
      display: flex;
      flex-direction: column;
      height: 420px; /* Fixed height for all product cards */
      background-color: white;
      border-radius: 0.75rem;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      overflow: hidden;
      transition: all 0.3s ease;
    }
    
    .product-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }
    
    .product-image-container {
      height: 220px; /* Fixed height for all product images */
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      background-color: #f9fafb;
    }
    
    .product-image {
      max-height: 100%;
      max-width: 100%;
      object-fit: contain;
    }
    
    .product-info {
      padding: 1rem;
      display: flex;
      flex-direction: column;
      flex-grow: 1;
    }
    
    .product-title {
      font-weight: 600;
      font-size: 0.875rem;
      margin-bottom: 0.5rem;
      flex-grow: 1;
    }
    
    .product-price-rating {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }
    
    .product-price {
      font-weight: bold;
      color: #3b82f6;
    }
    
    .product-rating {
      color: #f59e0b;
    }
    
    .add-to-cart-btn {
      background-color: #3b82f6;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 0.375rem;
      font-weight: 500;
      transition: background-color 0.2s ease;
      width: 100%;
    }
    
    .add-to-cart-btn:hover {
      background-color: #2563eb;
    }
  </style>
</head>
<body class="bg-gray-100 font-sans">

  <!-- Navbar -->
  <nav class="fixed top-0 w-full bg-white shadow z-50">
    <div class="max-w-7xl mx-auto flex justify-between items-center px-4 py-3">
      <h1 class="text-2xl font-bold text-blue-600">SmartShop</h1>
      <ul class="hidden md:flex space-x-6 font-medium">
        <li><a href="#home" class="nav-link text-gray-700 hover:text-blue-500 transition-colors duration-200">Home</a></li>
        <li><a href="#products" class="nav-link text-gray-700 hover:text-blue-500 transition-colors duration-200">Products</a></li>
        <li><a href="#reviews" class="nav-link text-gray-700 hover:text-blue-500 transition-colors duration-200">Reviews</a></li>
        <li><a href="#contact" class="nav-link text-gray-700 hover:text-blue-500 transition-colors duration-200">Contact</a></li>
      </ul>
    </div>
  </nav>

  <!-- Banner -->
  <section id="home" class="pt-20">
    <div class="relative w-full overflow-hidden">
      <div id="banner-slides" class="flex transition-transform duration-500 w-[200%]">
        <img src="banner1.jpg" alt="Banner 1" class="w-1/2 h-full object-cover">
        <img src="banner2.jpg" alt="Banner 2" class="w-1/2 h-full object-cover">
      </div>
      <button onclick="prevSlide()" class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded hover:bg-opacity-70 transition duration-200">‚ùÆ</button>
      <button onclick="nextSlide()" class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded hover:bg-opacity-70 transition duration-200">‚ùØ</button>
    </div>
  </section>

  <!-- Products -->
  <section id="products" class="max-w-7xl mx-auto px-4 py-12">
    <div class="flex flex-col md:flex-row justify-between items-center mb-6">
      <h2 class="text-3xl font-bold mb-4 md:mb-0">Our Products</h2>
      <div class="flex flex-col sm:flex-row items-center space-y-3 sm:space-y-0 sm:space-x-3">
        <input id="search" type="text" placeholder="Search products..." class="border p-2 rounded w-full sm:w-60 focus:outline-none focus:ring-2 focus:ring-blue-500">
        <select id="categoryFilter" class="border p-2 rounded w-full sm:w-auto focus:outline-none focus:ring-2 focus:ring-blue-500">
          <option value="all">All Categories</option>
        </select>
      </div>
    </div>
    <div id="productList" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
  </section>

  <!-- Cart Panel -->
  <div id="cartPanel" class="fixed right-0 top-0 w-80 bg-white shadow-lg h-full p-4 overflow-y-auto transform translate-x-full transition-transform duration-300 z-50">
    <div class="flex justify-between items-center mb-3">
      <h3 class="text-xl font-semibold">üõçÔ∏è Your Cart</h3>
      <button onclick="closeCart()" class="text-gray-500 hover:text-gray-700 transition duration-200">‚úï</button>
    </div>
    <ul id="cartItems" class="space-y-2 mb-4"></ul>
    <div class="border-t pt-4">
      <p id="subtotal" class="font-medium flex justify-between"><span>Subtotal:</span> <span>0 BDT</span></p>
      <p id="discount" class="font-medium flex justify-between" data-percent="0"><span>Discount:</span> <span>0%</span></p>
      <p id="delivery" class="font-medium flex justify-between"><span>Delivery:</span> <span>100 BDT</span></p>
      <p id="total" class="font-semibold text-lg mt-2 flex justify-between"><span>Total:</span> <span>0 BDT</span></p>
      <p id="balance" class="font-semibold text-blue-600 mt-2 flex justify-between"><span>Balance:</span> <span>1000 BDT</span></p>
    </div>
    <div class="mt-4 space-y-2">
      <input id="coupon" type="text" placeholder="Enter coupon" class="border p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-green-500">
      <button onclick="applyCoupon()" class="bg-green-500 text-white px-3 py-2 rounded w-full hover:bg-green-600 transition duration-200">Apply Coupon</button>
      <button onclick="addMoney()" class="bg-blue-500 text-white px-3 py-2 rounded w-full hover:bg-blue-600 transition duration-200">Add 1000 BDT</button>
      <button onclick="checkout()" class="bg-yellow-500 text-white px-3 py-2 rounded w-full hover:bg-yellow-600 transition duration-200">Checkout</button>
    </div>
  </div>

  <!-- Reviews -->
  <section id="reviews" class="bg-white py-12">
    <div class="max-w-5xl mx-auto px-4 text-center">
      <h2 class="text-3xl font-bold mb-6">Customer Reviews</h2>
      <div class="relative overflow-hidden">
        <div id="reviewSlides" class="flex transition-transform duration-500"></div>
        <button onclick="prevReview()" class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-gray-700 text-white p-2 rounded hover:bg-gray-800 transition duration-200">‚ùÆ</button>
        <button onclick="nextReview()" class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-gray-700 text-white p-2 rounded hover:bg-gray-800 transition duration-200">‚ùØ</button>
      </div>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="max-w-4xl mx-auto px-4 py-12">
    <h2 class="text-3xl font-bold mb-6 text-center">Contact Us</h2>
    <form id="contactForm" class="space-y-4">
      <input id="name" type="text" placeholder="Your Name" class="border p-2 w-full rounded focus:outline-none focus:ring-2 focus:ring-blue-500" required>
      <input id="email" type="email" placeholder="Your Email" class="border p-2 w-full rounded focus:outline-none focus:ring-2 focus:ring-blue-500" required>
      <textarea id="message" placeholder="Your Message" class="border p-2 w-full rounded focus:outline-none focus:ring-2 focus:ring-blue-500" rows="5" required></textarea>
      <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded w-full md:w-auto hover:bg-blue-700 transition duration-200">Send</button>
    </form>
    <p id="formMsg" class="text-green-600 mt-4 hidden">Thank you for your message! We'll get back to you soon.</p>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-800 text-white py-6 text-center">
    <p>¬© 2025 SmartShop | All rights reserved.</p>
    <button onclick="scrollToTop()" class="mt-3 bg-blue-500 px-3 py-1 rounded hover:bg-blue-600 transition duration-200">Back to Top</button>
  </footer>

  <!-- Cart Icon -->
  <div class="fixed bottom-4 right-4 bg-blue-600 text-white p-3 rounded-full shadow-lg z-40 cursor-pointer hover:bg-blue-700 transition duration-200" onclick="openCart()">
    <span class="relative">
      üõí
      <span id="cartCount" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center hidden">0</span>
    </span>
  </div>

  <script>
    // =========================
    // Banner Slide
    // =========================
    let slideIndex = 0;
    const slides = document.getElementById("banner-slides");
    const totalSlides = 2; // number of images

    function nextSlide() {
        slideIndex = (slideIndex + 1) % totalSlides;
        updateSlide();
    }
    function prevSlide() {
        slideIndex = (slideIndex - 1 + totalSlides) % totalSlides;
        updateSlide();
    }
    function updateSlide() {
        slides.style.transform = `translateX(-${slideIndex * 50}%)`;
    }
    if (totalSlides > 0) {
      setInterval(nextSlide, 5000);
    }

    // =========================
    // Products
    // =========================
    const productList = document.getElementById("productList");
    const categoryFilter = document.getElementById("categoryFilter");
    let products = [];

    async function loadProducts() {
      try {
        const res = await fetch("https://fakestoreapi.com/products");
        products = await res.json();
        products = products.map(p => ({ 
          ...p, 
          price: Math.max(Math.round(p.price * 100), 500) 
        }));
        displayProducts(products);
        populateCategories();
      } catch (error) {
        console.error("Error loading products:", error);
        productList.innerHTML = "<p class='text-center col-span-full py-8'>Failed to load products. Please try again later.</p>";
      }
    }

    function populateCategories() {
      const categories = [...new Set(products.map(p => p.category))];
      categories.forEach(cat => {
        const opt = document.createElement("option");
        opt.value = cat;
        opt.textContent = cat.charAt(0).toUpperCase() + cat.slice(1);
        categoryFilter.appendChild(opt);
      });
    }

    function displayProducts(items) {
      productList.innerHTML = "";
      if (items.length === 0) {
        productList.innerHTML = "<p class='text-center col-span-full py-8'>No products found.</p>";
        return;
      }
      items.forEach(p => {
        const div = document.createElement("div");
        div.className = "product-card";
        div.innerHTML = `
          <div class="product-image-container">
            <img src="${p.image}" alt="${p.title}" class="product-image">
          </div>
          <div class="product-info">
            <h3 class="product-title line-clamp-2">${p.title}</h3>
            <div class="product-price-rating">
              <p class="product-price">${p.price} BDT</p>
              <p class="product-rating">‚≠ê ${p.rating.rate}</p>
            </div>
            <button onclick="addToCart(${p.id}, ${p.price})" class="add-to-cart-btn">Add to Cart</button>
          </div>`
          ;
        productList.appendChild(div);
      });
    }

    // Search & Filter
    document.getElementById("search").addEventListener("input", e => {
      const val = e.target.value.toLowerCase();
      const category = categoryFilter.value;
      let filtered = products;
      if (category !== "all") filtered = filtered.filter(p => p.category === category);
      if (val) filtered = filtered.filter(p => p.title.toLowerCase().includes(val));
      displayProducts(filtered);
    });

    categoryFilter.addEventListener("change", e => {
      const val = e.target.value;
      const searchVal = document.getElementById("search").value.toLowerCase();
      let filtered = val === "all" ? products : products.filter(p => p.category === val);
      if (searchVal) filtered = filtered.filter(p => p.title.toLowerCase().includes(searchVal));
      displayProducts(filtered);
    });

    // =========================
    // Cart System
    // =========================
    let cart = [];
    let balance = parseInt(localStorage.getItem("balance")) || 1000;
    const cartPanel = document.getElementById("cartPanel");
    const cartCount = document.getElementById("cartCount");

    function addToCart(id, price) {
      const item = products.find(p => p.id === id);
      const existing = cart.find(c => c.id === id);
      if (existing) existing.qty++;
      else cart.push({ ...item, qty: 1, price });
      updateCart();
      openCart();
    }

    function removeFromCart(id) {
      cart = cart.filter(c => c.id !== id);
      updateCart();
    }

    function updateCart() {
      const cartItems = document.getElementById("cartItems");
      cartItems.innerHTML = "";
      let subtotal = 0;
      cart.forEach(item => {
        subtotal += item.price * item.qty;
        const li = document.createElement("li");
        li.className = "flex justify-between items-center border-b py-2";
        li.innerHTML = `
          <div>
            <p class="font-medium">${item.title}</p>
            <p class="text-gray-500 text-sm">Qty: ${item.qty}</p>
          </div>
          <div>
            <p>${item.price * item.qty} BDT</p>
            <button onclick="removeFromCart(${item.id})" class="text-red-500 text-sm hover:underline">Remove</button>
          </div>`
          ;
        cartItems.appendChild(li);
      });
      const discountPercent = parseInt(document.getElementById("discount").dataset.percent) || 0;
      const delivery = 100;
      const discountAmt = subtotal * discountPercent / 100;
      const total = subtotal - discountAmt + delivery;
      document.getElementById("subtotal").children[1].textContent = `${subtotal} BDT`;
      document.getElementById("total").children[1].textContent = `${total} BDT`;
      document.getElementById("balance").children[1].textContent = `${balance} BDT`;
      cartCount.textContent = cart.length;
      cartCount.style.display = cart.length > 0 ? "flex" : "none";
    }

    function openCart() { cartPanel.classList.remove("translate-x-full"); }
    function closeCart() { cartPanel.classList.add("translate-x-full"); }

    function applyCoupon() {
      const code = document.getElementById("coupon").value.trim();
      let percent = 0;
      if (code === "DISCOUNT10") percent = 10;
      else if (code === "DISCOUNT20") percent = 20;
      document.getElementById("discount").dataset.percent = percent;
      document.getElementById("discount").children[1].textContent = percent + "%";
      updateCart();
    }

    function addMoney() {
      balance += 1000;
      localStorage.setItem("balance", balance);
      updateCart();
    }

    function checkout() {
      const total = parseInt(document.getElementById("total").children[1].textContent);
      if (total > balance) alert("Insufficient balance!");
      else {
        balance -= total;
        localStorage.setItem("balance", balance);
        cart = [];
        updateCart();
        alert("Checkout successful!");
      }
    }

    // =========================
    // Reviews - Easy Edit
    // =========================
    const reviews = [
      { name: "Tazbih", comment: "Great products! The quality exceeded my expectations.", rating: 5, date: "2025-01-01", img: "review1.jpg" },
      { name: "Imam", comment: "Fast delivery and excellent service.", rating: 4, date: "2025-01-02", img: "review2.jpg" },
      { name: "Hasib", comment: "Excellent service and product quality.", rating: 5, date: "2025-01-03", img: "review3.jpg" },
    ];

    const reviewSlides = document.getElementById("reviewSlides");
    let reviewIndex = 0;

    function renderReviews() {
      reviewSlides.innerHTML = "";
      reviews.forEach(r => {
        const div = document.createElement("div");
        div.className = "w-full flex-shrink-0 p-4";
        div.innerHTML = `
          <div class="review-card">
            <img src="${r.img}" alt="${r.name}" class="review-photo">
            <p class="review-name">${r.name}</p>
            <div class="review-rating">${'‚≠ê'.repeat(r.rating)}</div>
            <p class="review-comment">"${r.comment}"</p>
            <p class="review-date">${r.date}</p>
          </div>
        `;
        reviewSlides.appendChild(div);
      });
      updateReview();
    }

    function nextReview() { reviewIndex = (reviewIndex + 1) % reviews.length; updateReview(); }
    function prevReview() { reviewIndex = (reviewIndex - 1 + reviews.length) % reviews.length; updateReview(); }
    function updateReview() { reviewSlides.style.transform = `translateX(-${reviewIndex * 100}%)`; }

    if (reviews.length > 1) setInterval(nextReview, 5000);
    renderReviews();

    // =========================
    // Contact Form
    // =========================
    const contactForm = document.getElementById("contactForm");
    contactForm.addEventListener("submit", e => {
      e.preventDefault();
      contactForm.reset();
      document.getElementById("formMsg").classList.remove("hidden");
      setTimeout(()=>document.getElementById("formMsg").classList.add("hidden"), 5000);
    });

    // =========================
    // Scroll to top
    // =========================
    function scrollToTop() { window.scrollTo({ top: 0, behavior: "smooth" }); }

    // Load products initially
    loadProducts();
  </script>

</body>
</html>
